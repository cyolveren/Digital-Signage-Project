<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>CoB Digital Display Project</title>
    <link rel="stylesheet" type="text/css" href="_css/main.css">

    <script src="js/moment.js" type="text/javascript"></script>
    
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>


 <script src="js/bootstrap.min.js"></script>
 <link href="_css/bootstrap.min.css" rel="stylesheet">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css">
 


<script type="text/javascript">

  //get data from json file and refresh "feed" <div> every second
  
$(document).ready(function (){
          
        /* set no cache */
        $.ajaxSetup({ cache: false });
 

setInterval((function interval() { 
  $.getJSON('data.json',  function(data){ 
            var html = [];
 

            /* loop through array */
            $.each(data.slice(0,9), /* limits number of data displayed */ function(index, d){  
                
                 
                html.push(d.node_title, "<br>", d.field_event_date, "<br>","<br>");   // display title and date
                
                
            });
           
            
            $("#feed").html(html.join(''));
        }).error(function(jqXHR, textStatus, errorThrown){ /* assign handler */
            /* alert(jqXHR.responseText) */
            alert("error occurred!");
        
       });
           return interval;
})(), 900000); //setinterval , refresh the data every 15 mins

});


</script>

<meta http-equiv="refresh" content="1800">   <!-- refresh the page every 30 mins  -->
 
</head>

<body>


  <!-- CAROUSEL  -->
           <div class="content">
        <div class="main-1-1">
           <div class="bs-example">
    <div id="myCarousel" class="carousel slide" data-interval="3000" data-ride="carousel">
    	<!-- Carousel indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
        </ol>   
        <!-- Wrapper for carousel items -->
        <div class="carousel-inner">
            <div class="active item">
                <img src="http://placehold.it/1280x905/00FF00/000000" alt="First Slide">
         
            </div>
            <div class="item">
                <img src="http://placehold.it/1280x905" alt="Second Slide">
            
            </div>
            <div class="item">
                <img src="http://placehold.it/1280x905/C0C0C0/0000FF" alt="Third Slide">
               
            </div>
        </div>
        <!-- Carousel controls -->
        <a class="carousel-control left" href="#myCarousel" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="carousel-control right" href="#myCarousel" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right"></span>
        </a>
    </div>
           
       </div>

</div>


                  <div class="main-1-3">
                    

   
    <div id="feed"></div>
 
 </div>
 
  </div>

    <div class="footer">
         <div class="col-3-1">
             <!-- logo -->
             <img src="_img/cob-wordmark-white.svg" width="200" height="175" alt="" />


        </div>
        <div class="col-3-2">


              <div id="Time">
</div>


<!-- function for time on the right corner -->
  <script type="text/javascript">
  
(function()
{
var NowMoment = moment();
var eDisplayMoment = document.getElementById('Time');
eDisplayMoment.innerHTML = NowMoment.format('HH:mm A');
  
$('#Time').fitText(1.3);


})();


</script>

<!-- updates time every second -->
 <script type="text/javascript">

function date_time() {
  now = moment().format('h:mm A');
  document.getElementById('Time').innerHTML = now;
  setTimeout(function () { date_time(); }, 1000);
}
date_time();

</script>
</div>
        </div>

</body>

</html>